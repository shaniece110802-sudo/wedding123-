<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IS OUR DAY</title>
<style>
  body {
    font-family: "Microsoft YaHei", sans-serif;
    background: url("bg.jpg") center/cover fixed;
    text-align: center;
    color: #b22222;
    padding: 30px;
    overflow-x: hidden;
  }
  .container {
    background: rgba(255, 255, 255, 0.9);
    border-radius: 20px;
    padding: 30px;
    max-width: 480px;
    margin: auto;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    position: relative;
    z-index: 10;
  }
  h1 { font-size: 28px; margin-bottom: 10px; }
  select, input {
    padding: 10px;
    font-size: 16px;
    border-radius: 8px;
    border: 1px solid #ccc;
    margin: 5px;
  }
  input { width: 65%; }
  button {
    background: #b22222;
    color: white;
    border: none;
    padding: 10px 18px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    margin: 5px;
  }
  button:hover { background: #d93232; }
  ul { list-style: none; padding: 0; }
  li { margin: 5px 0; }
  .not-checked { color: #777; }
  #result { margin: 10px 0; font-weight: bold; }
  #stats { margin-top: 10px; font-size: 16px; }

  /* ğŸŒ¸ çˆ±å¿ƒé£˜è½ */
  .heart {
    position: fixed;
    top: -20px;
    font-size: 20px;
    color: pink;
    animation: fall 4s linear forwards;
    z-index: 1;
  }
  @keyframes fall {
    0% {transform: translateY(0) rotate(0deg); opacity: 1;}
    100% {transform: translateY(100vh) rotate(360deg); opacity: 0;}
  }

  /* ğŸ” è‡ªåŠ¨è¡¥å…¨åˆ—è¡¨ */
  #suggestions {
    position: absolute;
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    max-height: 150px;
    overflow-y: auto;
    width: 65%;
    margin-left: 65px;
    z-index: 100;
  }
  #suggestions div {
    padding: 8px;
    cursor: pointer;
  }
  #suggestions div:hover {
    background: #ffe4e1;
  }
</style>
</head>
<body>
  <div class="container">
    <img src="happy_wedding.png" alt="Wedding" width="200">
    <h1>IS OUR DAY</h1>

    <select id="sideSelect" onchange="switchSide()">
      <option value="male">ç”·æ–¹åå•</option>
      <option value="female">å¥³æ–¹åå•</option>
    </select>

    <div style="position: relative;">
      <input id="nameInput" type="text" placeholder="è¯·è¾“å…¥åå­—" oninput="showSuggestions()">
      <div id="suggestions"></div>
    </div>

    <button onclick="signIn()">ç­¾åˆ°</button>
    <div id="result"></div>

    <button onclick="showNotSigned()">æŸ¥çœ‹æœªç­¾åˆ°</button>
    <button onclick="exportSignedList()">å¯¼å‡ºç­¾åˆ°åå•</button>
    <button onclick="clearAll()">æ¸…ç©ºç­¾åˆ°è®°å½•</button>

    <div id="stats"></div>
    <ul id="notSignedList"></ul>
  </div>

<script>
  // ğŸ’™ ç”·æ–¹åå•
  const guestListMale = ["é‚“é¡ºåŸï¼ˆè¡¨å“¥ï¼‰åˆå®¶","æé¸¿é‘«ï¼ˆè¡¨å§å¤«ï¼‰åˆå®¶","Ronnie Leong & Eileen Low","é‚“å¹¿ç¤¼ï¼ˆèˆ…èˆ…ï¼‰åˆå®¶","ææŒ¯æ¸©ï¼ˆè¡¨å§å¤«åˆå®¶ï¼‰","é‚“é¡ºå’Œï¼ˆè¡¨å“¥ï¼‰åˆå®¶","Ms Sam Mei & Family","Mr Vincent Hong & Family","æ—è¿›è´¢å…ˆç”Ÿ","è°­æ…§å‹¤å…ˆç”Ÿ","è”¡å…‹æ£‹å¤«å¦‡","Mdm Helen Lai & Family","ç‹é”¦å£•å…ˆç”Ÿ","Mr & Mrs Dennis Low","Mr & Mr Alex Teh","Mr & Mrs Jason Ng","Mr Benny Tung","Mr Ong Tiong Yee","Mr Vincent Tee","Ms Wai Ling & Mr Foo","Mr Jeff Ooi","Mr & Mrs Terry Chung","Mr Chris Koh & Family","Mr Steven Yeoh","åˆ˜æ°¸è±ªå…ˆç”Ÿ","å‘¨æ³“è¾¾å¤«å¦‡","æ—é“ç¥¥å¤«å¦‡","Anjo Chong","Ms.Albee Fong","å¶å…´è¾‰å¤«å¦»","Ms.Jessie Tan","åˆ˜æ°¸å®‰å¤«å¦‡","ä½•ä¿è¹å°å§","Ms.Cherish","æå½©é›¯å¤«å¦‡","Ms.Suki","Andrew SKP","æ±¤ä¼Ÿå…‰å…ˆç”Ÿ","æ±¤ä½©è‹±å°å§","åˆ˜æ°¸èƒœå¤«å¦‡","åˆ˜æ°¸ä¸ºå…ˆç”Ÿ","å½­æ·»è´¢å…ˆç”Ÿ","Mr & Mrs Kenneth Koo","Mr SK Lim & Family","è®¸è´¢é¾™å…ˆç”Ÿ","Mr Ng Jin Hoe & Family","Mr Ng Loon Ping","Mr Lionel Tan","Mr Jack Chua","æå›½è±ªå…ˆç”Ÿ","Mr Lee Yoke Wah","é»„äº‘å·å…ˆç”Ÿ","é»„ä¼Ÿå¤å…ˆç”Ÿ","Mr & Mrs Ng Seng Meng","è”¡é‡‘å»ºå…ˆç”Ÿ","Mr Javet Khoo","Mr Marcus Lim","Mr & Mrs Jonathan Yeow","Mr William Tan","ä¼ä¸–ç¥¥å¤«å¦‡","Mr Larry Tan & Family","é»„ä¸½å†°å°å§","Mr & Mrs Justin Tan","Mr Lee Keat Hoe","Ms Jane Loo","Ms Sow Jia Yee","Ms Sow Xin Yee","Mr Damon & Ms Jeslyn","Mr Pang Chye What & Family","Ms Wen Low","Mr Loo Yong Jun & Family","Mr Sean Khuan & Family","Mr & Mrs Long","Mr Kevin Cheng","å´æŸä¿Šå…ˆç”Ÿ","Mr Bernard Leong","æ´ªä¸–ä¼Ÿå…ˆç”Ÿ","é»„å“²ç¿”å…ˆç”Ÿ","æ—å¿—ç¿°å¤«å¦‡","å´ä¿æ©å°å§","Ms Sharon Yong","Mr Bosco Chong","ç‹ç‡ç¯å¥³å£«","Mr & Mrs Kevin Yong","å½­å®¶å®å¤«å¦‡","é¾ å¿å¼ºå…ˆç”Ÿ","Mr Wen Jun","ç‹å¾·ä¸°å…ˆç”Ÿ","Mr Anthony Ng","å´ç´ è•Šå°å§","Mr & Mrs Stanley Wong","Mr Ryan Siah","Mr Kit"];

  // ğŸ’– å¥³æ–¹åå•
  const guestListFemale = ["ç½—ä¸½æ¸…å¥³å£«","å®‹æ¸…åœ° åˆå®¶","é™ˆå¦‚ä¹ å¤«å¦‡","å®‹ç…Œçš‡ å…ˆç”Ÿ","å®‹è´µè£ å¤«å¦‡","å®‹æ¸…æº åˆå®¶","å®‹æ¸…ä¿¨ å…ˆç”Ÿ","æç‘ç¦„ åˆå®¶","Mr. & Mrs.Albert Chiew & Family","Jane Chew and family","Alicia Chew and family","Mr & Mrs Damian Yeo","Mr & Mrs Alex Chew","é‚“ç„•æ´ª åˆå®¶","Ms. Chew Loke Lai","Mr. & Mrs.Albert Chiew & Family","æ²ˆèµè—© åˆå®¶","Chiew Boon Chong & Family","Mdm Tan Man Yeng & Family","Ms.Lye Li Yin","Ms.Winni Ling","é‚“ä¹‰ç»®å°å§","æ¨è¯—é“ƒ å¥³å£«","è‹äº¿æ…§ å¥³å£«","è°¢æŸ”èŒ å¥³å£«","May JM with Partner","Ms.Elaine Tiew","Ms.Jocelyn Yu","Ms.Wong Pei Leen","Ms.Eunice Foo","è²å“¥","æå†¬å¹³","é™ˆä¸ºéš½","Mr.Terry Teng","Ms.Maydeline Ang","æˆ´ä¼Ÿåº­å…ˆç”Ÿ","ä½™è€€é“–å…ˆç”Ÿ","è”¡å¨èƒœå…ˆç”Ÿ","Ms. Jia Qi","Mr.Ryan","Mr & Ms.Katheline","é˜¿å®å…ˆç”Ÿ"];

  let currentSide = "male";
  const signedMale = new Set(JSON.parse(localStorage.getItem("signedMale") || "[]"));
  const signedFemale = new Set(JSON.parse(localStorage.getItem("signedFemale") || "[]"));

  function getCurrentList() {
    return currentSide === "male" ? guestListMale : guestListFemale;
  }
  function getCurrentSigned() {
    return currentSide === "male" ? signedMale : signedFemale;
  }
  function saveData() {
    localStorage.setItem("signedMale", JSON.stringify([...signedMale]));
    localStorage.setItem("signedFemale", JSON.stringify([...signedFemale]));
  }

  // ğŸ¯ ç­¾åˆ°
  function signIn() {
    const input = document.getElementById("nameInput");
    const name = input.value.trim();
    const result = document.getElementById("result");
    const signed = getCurrentSigned();
    const list = getCurrentList();
    if (!name) return (result.textContent = "è¯·è¾“å…¥åå­—ã€‚");
    if (!list.includes(name)) return (result.textContent = "åå•ä¸­æ²¡æœ‰æ­¤åå­—ã€‚");
    if (signed.has(name)) return (result.textContent = `âœ… ${name} å·²ç­¾åˆ°è¿‡äº†ï¼`);

    signed.add(name);
    saveData();
    result.textContent = `âœ… æ¬¢è¿ ${name} ç­¾åˆ°æˆåŠŸï¼`;
    input.value = "";
    hideSuggestions();
    createHearts();
    updateStats();
  }

  // ğŸ’• é£˜çˆ±å¿ƒ
  function createHearts() {
    for (let i = 0; i < 8; i++) {
      const heart = document.createElement("div");
      heart.className = "heart";
      heart.textContent = ["ğŸ’–","ğŸ’•","ğŸ’"][Math.floor(Math.random()*3)];
      heart.style.left = Math.random()*100 + "vw";
      heart.style.animationDuration = 3 + Math.random()*2 + "s";
      document.body.appendChild(heart);
      setTimeout(()=>heart.remove(),5000);
    }
  }

  // ğŸ“‹ æœªç­¾åˆ°
  function showNotSigned() {
    const list = document.getElementById("notSignedList");
    list.innerHTML = "";
    const all = getCurrentList();
    const signed = getCurrentSigned();
    const notSigned = all.filter(n => !signed.has(n));
    if (!notSigned.length) return (list.innerHTML = "<li>ğŸ‰ æ‰€æœ‰äººéƒ½å·²ç­¾åˆ°ï¼</li>");
    notSigned.forEach(n => {
      const li = document.createElement("li");
      li.textContent = n;
      li.className = "not-checked";
      list.appendChild(li);
    });
  }

  // ğŸ’¾ å¯¼å‡º
  function exportSignedList() {
    const text = 
      "ğŸ’™ ç”·æ–¹å·²ç­¾åˆ°ï¼š\n" + [...signedMale].join("\n") + 
      "\n\nğŸ’– å¥³æ–¹å·²ç­¾åˆ°ï¼š\n" + [...signedFemale].join("\n");
    const blob = new Blob([text], {type:"text/plain;charset=utf-8"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "ç­¾åˆ°åå•.txt";
    a.click();
    URL.revokeObjectURL(url);
  }

  // ğŸ§¹ æ¸…ç©º
  function clearAll() {
    if (confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰ç­¾åˆ°è®°å½•å—ï¼Ÿ")) {
      signedMale.clear(); signedFemale.clear();
      saveData(); updateStats();
      document.getElementById("result").textContent = "æ‰€æœ‰ç­¾åˆ°è®°å½•å·²æ¸…ç©ºã€‚";
      document.getElementById("notSignedList").innerHTML = "";
    }
  }

  // ğŸ” è‡ªåŠ¨è¡¥å…¨
  function showSuggestions() {
    const input = document.getElementById("nameInput");
    const suggestions = document.getElementById("suggestions");
    const value = input.value.trim();
    const list = getCurrentList();
    suggestions.innerHTML = "";
    if (!value) return;

    const matches = list.filter(n => n.toLowerCase().includes(value.toLowerCase())).slice(0, 8);
    matches.forEach(name => {
      const div = document.createElement("div");
      div.textContent = name;
      div.onclick = () => {
        input.value = name;
        hideSuggestions();
      };
      suggestions.appendChild(div);
    });
  }
  function hideSuggestions() {
    document.getElementById("suggestions").innerHTML = "";
  }

  // ğŸ§­ åˆ‡æ¢
  function switchSide() {
    currentSide = document.getElementById("sideSelect").value;
    document.getElementById("result").textContent = "";
    document.getElementById("notSignedList").innerHTML = "";
    hideSuggestions();
    updateStats();
  }

  // ğŸ“Š ç»Ÿè®¡
  function updateStats() {
    const stats = document.getElementById("stats");
    const list = getCurrentList();
    const signed = getCurrentSigned();
    const label = currentSide === "male" ? "ç”·æ–¹" : "å¥³æ–¹";
    stats.textContent = `${label} å·²ç­¾åˆ°ï¼š${signed.size} / ${list.length}`;
  }
  updateStats();
</script>
</body>
</html>
